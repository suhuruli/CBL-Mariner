From 426ca10382cee539134fbaf933bc73a4ea041f50 Mon Sep 17 00:00:00 2001
From: Saul Paredes <saulparedes@microsoft.com>
Date: Wed, 28 Sep 2022 20:52:40 -0700
Subject: [PATCH] removed tulip.c from build process due to CVE-2022-2962

---
 hw/net/meson.build | 2 +-
 hw/net/tulip.c     | 3 +++
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/hw/net/meson.build b/hw/net/meson.build
index bdf71f1..3de6285 100644
--- a/hw/net/meson.build
+++ b/hw/net/meson.build
@@ -11,7 +11,7 @@ softmmu_ss.add(when: 'CONFIG_E1000_PCI', if_true: files('e1000.c', 'e1000x_commo
 softmmu_ss.add(when: 'CONFIG_E1000E_PCI_EXPRESS', if_true: files('net_tx_pkt.c', 'net_rx_pkt.c'))
 softmmu_ss.add(when: 'CONFIG_E1000E_PCI_EXPRESS', if_true: files('e1000e.c', 'e1000e_core.c', 'e1000x_common.c'))
 softmmu_ss.add(when: 'CONFIG_RTL8139_PCI', if_true: files('rtl8139.c'))
-softmmu_ss.add(when: 'CONFIG_TULIP', if_true: files('tulip.c'))
+#softmmu_ss.add(when: 'CONFIG_TULIP', if_true: files('tulip.c')) # taking out of build due to CVE-2022-2962
 softmmu_ss.add(when: 'CONFIG_VMXNET3_PCI', if_true: files('net_tx_pkt.c', 'net_rx_pkt.c'))
 softmmu_ss.add(when: 'CONFIG_VMXNET3_PCI', if_true: files('vmxnet3.c'))
 
diff --git a/hw/net/tulip.c b/hw/net/tulip.c
index ca69f7e..e405774 100644
--- a/hw/net/tulip.c
+++ b/hw/net/tulip.c
@@ -18,6 +18,9 @@
 #include "trace.h"
 #include "net/eth.h"
 
+// Taking this file out of the build process due to CVE-2022-2962
+DEADBEEF // syntax error ensures it's not included in the build
+
 struct TULIPState {
     PCIDevice dev;
     MemoryRegion io;
-- 
2.25.1

